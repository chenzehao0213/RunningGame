static CookieContainer GetCookie(string postString, string postUrl)
{

    CookieContainer cookie = new CookieContainer();

    HttpWebRequest httpRequset = (HttpWebRequest)HttpWebRequest.Create(postUrl);//创建http 请求
    httpRequset.CookieContainer = cookie;//设置cookie
    httpRequset.Method = "POST";//POST 提交
    httpRequset.KeepAlive = true;
    httpRequset.UserAgent = "Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; rv:11.0) like Gecko";
    httpRequset.Accept = "text/html, application/xhtml+xml, */*";
    httpRequset.ContentType = "application/x-www-form-urlencoded";//以上信息在监听请求的时候都有的直接复制过来
    byte[] bytes = System.Text.Encoding.UTF8.GetBytes(postString);
    httpRequset.ContentLength = bytes.Length;
    Stream stream = httpRequset.GetRequestStream();
    stream.Write(bytes, 0, bytes.Length);
    stream.Close();//以上是POST数据的写入

    HttpWebResponse httpResponse = (HttpWebResponse)httpRequset.GetResponse();//获得 服务端响应
    return cookie;//拿到cookie
}